// LOGIN
const loginForm = document.getElementById('login-form');
if(loginForm){
  loginForm.addEventListener('submit', e => {
    e.preventDefault();
    const username = document.getElementById('login-username').value.trim();
    const password = document.getElementById('login-password').value.trim();
    const user = JSON.parse(localStorage.getItem('user_' + username));
    if(!user){ alert('‚ùå User not found'); return; }
    if(user.password !== password){ alert('‚ùå Incorrect password'); return; }
    alert(`‚úÖ Welcome back, ${user.name}!`);
    window.location.href = `/users/${username}/`;
  });

  document.getElementById('forgot-btn').addEventListener('click', () => {
    const username = prompt('Enter your username:');
    const user = JSON.parse(localStorage.getItem('user_' + username));
    if(!user){ alert('User not found'); return; }
    alert(`üîë Your password is: ${user.password}`);
  });
}

// SIGNUP
const signupForm = document.getElementById('signup-form');
if(signupForm){
  signupForm.addEventListener('submit', e => {
    e.preventDefault();
    const username = document.getElementById('signup-username').value.trim();
    const password = document.getElementById('signup-password').value.trim();
    const email = document.getElementById('signup-email').value.trim();
    const name = document.getElementById('signup-name').value.trim();
    const profileImg = document.getElementById('signup-profile-img').value.trim();

    if(localStorage.getItem('user_' + username)){
      alert('‚ùå Username already exists');
      return;
    }

    localStorage.setItem('user_' + username, JSON.stringify({
      username, password, email, name, profileImg
    }));

    alert('‚úÖ Account created! Logging you in...');
    window.location.href = `/users/${username}/`;
  });
}
