<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>evolu space – login / signup</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  :root {
    --yellow: #ffb700;
    --yellow-dark: #ffa500;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; font-family: Inter, sans-serif; }
  html, body { height: 100%; }
  body {
    display: flex; align-items: center; justify-content: center;
    min-height: 100vh; background: #111; overflow: hidden;
  }
  #particle-canvas { position: fixed; top:0; left:0; width:100%; height:100%; z-index:-1; }
  .card {
    width: 380px; max-width: 100%;
    background: rgba(255,255,255,0.95);
    border-radius: 16px;
    box-shadow: 0 12px 40px rgba(0,0,0,0.2);
    padding: 24px;
  }
  .tabs { display: flex; margin-bottom: 16px; }
  .tab {
    flex: 1; text-align: center; padding: 10px; cursor: pointer;
    font-weight: 600; border-bottom: 2px solid transparent; transition: 0.2s;
  }
  .tab.active { border-color: var(--yellow); color: var(--yellow-dark); }
  .form { display: none; }
  .form.active { display: block; }
  .field { margin-bottom: 12px; }
  input {
    width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;
    font-size: 15px;
  }
  button {
    width: 100%; padding: 10px;
    background: var(--yellow); border: none; border-radius: 6px;
    font-size: 15px; font-weight: 600; cursor: pointer;
  }
  button:hover { background: var(--yellow-dark); }
  .error, .success { margin-top: 10px; font-size: 14px; }
  .error { color: red; }
  .success { color: green; }
</style>
</head>
<body>
<canvas id="particle-canvas"></canvas>
<div class="card">
  <div class="tabs">
    <div id="loginTab" class="tab active">login</div>
    <div id="signupTab" class="tab">signup</div>
  </div>
  <div id="loginForm" class="form active">
    <div class="field"><input type="email" id="loginEmail" placeholder="email" required></div>
    <div class="field"><input type="password" id="loginPassword" placeholder="password" required></div>
    <button id="loginBtn">login</button>
    <div id="loginMessage"></div>
  </div>
  <div id="signupForm" class="form">
    <div class="field"><input type="email" id="signupEmail" placeholder="email" required></div>
    <div class="field"><input type="password" id="signupPassword" placeholder="password" required></div>
    <button id="signupBtn">signup</button>
    <div id="signupMessage"></div>
  </div>
</div>

<script>
const supabase = window.supabase.createClient(
  "https://YOUR-PROJECT-REF.supabase.co",
  "YOUR-ANON-KEY"
);

// Tab switching
const loginTab = document.getElementById("loginTab");
const signupTab = document.getElementById("signupTab");
const loginForm = document.getElementById("loginForm");
const signupForm = document.getElementById("signupForm");

loginTab.onclick = () => {
  loginTab.classList.add("active");
  signupTab.classList.remove("active");
  loginForm.classList.add("active");
  signupForm.classList.remove("active");
};
signupTab.onclick = () => {
  signupTab.classList.add("active");
  loginTab.classList.remove("active");
  signupForm.classList.add("active");
  loginForm.classList.remove("active");
};

// Login
document.getElementById("loginBtn").onclick = async () => {
  const email = document.getElementById("loginEmail").value;
  const password = document.getElementById("loginPassword").value;
  const { data, error } = await supabase.auth.signInWithPassword({ email, password });
  const msg = document.getElementById("loginMessage");
  if (error) msg.innerHTML = `<div class="error">${error.message}</div>`;
  else {
    msg.innerHTML = `<div class="success">logged in! redirecting…</div>`;
    setTimeout(() => window.location.href = "/dashboard.html", 1000);
  }
};

// Signup
document.getElementById("signupBtn").onclick = async () => {
  const email = document.getElementById("signupEmail").value;
  const password = document.getElementById("signupPassword").value;
  const { data, error } = await supabase.auth.signUp({ email, password });
  const msg = document.getElementById("signupMessage");
  if (error) msg.innerHTML = `<div class="error">${error.message}</div>`;
  else msg.innerHTML = `<div class="success">check your email to confirm signup</div>`;
};
</script>

<script>
// Particle system with mouse interaction
const canvas = document.getElementById("particle-canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const particles = [];
const numParticles = 80;
const mouse = { x: null, y: null };

for (let i = 0; i < numParticles; i++) {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: 2 + Math.random() * 2,
    dx: (Math.random() - 0.5) * 1,
    dy: (Math.random() - 0.5) * 1
  });
}

function drawParticles() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for (let p of particles) {
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle = "#ffcc00";
    ctx.fill();

    // movement
    p.x += p.dx; p.y += p.dy;

    // bounce edges
    if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
    if (p.y < 0 || p.y > canvas.height) p.dy *= -1;

    // gentle attraction to mouse
    if (mouse.x && mouse.y) {
      const distX = mouse.x - p.x;
      const distY = mouse.y - p.y;
      const dist = Math.sqrt(distX*distX + distY*distY);
      if (dist < 120) {
        p.x -= distX * -0.002;
        p.y -= distY * -0.002;
      }
    }
  }
  requestAnimationFrame(drawParticles);
}
drawParticles();

window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
window.addEventListener("mousemove", e => {
  mouse.x = e.x; mouse.y = e.y;
});
</script>
</body>
</html>
